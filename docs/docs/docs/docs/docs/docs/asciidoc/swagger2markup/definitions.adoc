
[[_definitions]]
== Definitions

[[_accessmethod]]
=== AccessMethod

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**access_id** +
__optional__|An arbitrary string to be passed to the `/access` method to get an `AccessURL`. This string must be unique per object. Note that at least one of `access_url` and `access_id` must be provided.|string
|**access_url** +
__optional__|An `AccessURL` that can be used to fetch the actual object bytes. Note that at least one of `access_url` and `access_id` must be provided.|<<_accessurl,AccessURL>>
|**region** +
__optional__|Name of the region in the cloud service provider that the object belongs to. +
**Example** : `"us-east-1"`|string
|**type** +
__required__|Type of the access method.|enum (s3, gs, ftp, gsiftp, globus, htsget, https, file)
|===


[[_accessurl]]
=== AccessURL

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**headers** +
__optional__|An optional list of headers to include in the HTTP request to `url`. These headers can be used to provide auth tokens required to fetch the object bytes. +
**Example** : `{
  "Authorization" : "Basic Z2E0Z2g6ZHJz"
}`|< string > array
|**url** +
__required__|A fully resolvable URL that can be used to fetch the actual object bytes.|string
|===


[[_bundleobject]]
=== BundleObject

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**drs_uri** +
__optional__|A list of full DRS identifier URI paths that may be used to obtain the object. These URIs may be external to this DRS instance. +
**Example** : `"drs://example.com/ga4gh/drs/v1/objects/{object_id}"`|< string > array
|**id** +
__required__|A DRS identifier of an `Object` (either a single blob or a nested bundle).|string
|**name** +
__required__|A name declared by the bundle author that must be used when materialising this object, overriding any name directly associated with the object itself. This string MUST NOT contain any slashes.|string
|===


[[_checksum]]
=== Checksum

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**checksum** +
__required__|The hex-string encoded checksum for the data|string
|**type** +
__optional__|The digest method used to create the checksum. If left unspecified md5
will be assumed.

possible values:
md5 # most blob stores provide a checksum using this
etag # multipart uploads to blob stores
sha256
sha512|string
|===


[[_error]]
=== Error
An object that can optionally include information about the error.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**msg** +
__optional__|A detailed error message.|string
|**status_code** +
__optional__|The integer representing the HTTP status code (e.g. 200, 404).|integer
|===


[[_object]]
=== Object

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**access_methods** +
__optional__|The list of access methods that can be used to fetch the `Object`.
Required for single blobs; optional for bundles.|< <<_accessmethod,AccessMethod>> > array
|**aliases** +
__optional__|A list of strings that can be used to find other metadata about this `Object` from external metadata sources. These aliases can be used to represent secondary accession numbers or external GUIDs.|< string > array
|**checksums** +
__required__|The checksum of the `Object`. At least one checksum must be provided.
For blobs, the checksum is computed over the bytes in the blob.

For bundles, the checksum is computed over a sorted concatenation of the checksums of its top-level contained objects (not recursive, names not included). The list of checksums is sorted alphabetically (hex-code) before concatenation and a further checksum is performed on the concatenated checksum value.

For example, if a bundle contains blobs with the following checksums:
md5(blob1) = 72794b6d30bc86d92e40a1aa65c880b8

md5(blob2) = 5e089d29a18954e68a78ee6a3c6edabd 

Then the checksum of the bundle is:
md5( concat( sort( md5(blob1), md5(blob2) ) ) )

= md5( concat( sort( 72794b6d30bc86d92e40a1aa65c880b8, 5e089d29a18954e68a78ee6a3c6edabd ) ) )

= md5( concat( 5e089d29a18954e68a78ee6a3c6edabd, 72794b6d30bc86d92e40a1aa65c880b8 ) )

= md5( 5e089d29a18954e68a78ee6a3c6edabd72794b6d30bc86d92e40a1aa65c880b8 )

= f7a29a0422e7d870b10839ad6c985079|< <<_checksum,Checksum>> > array
|**contents** +
__optional__|If not set, this `Object` is a single blob.
If set, this `Object` is a bundle containing the listed `BundleObject` s (some of which may be further nested).|< <<_bundleobject,BundleObject>> > array
|**created** +
__required__|Timestamp of object creation in RFC3339.|string (date-time)
|**description** +
__optional__|A human readable description of the `Object`.|string
|**id** +
__required__|An identifier unique to this `Object`.|string
|**mime_type** +
__optional__|A string providing the mime-type of the `Object`. +
**Example** : `"application/json"`|string
|**name** +
__optional__|A string that can be used to name an `Object`.|string
|**size** +
__required__|For blobs, the blob size in bytes.
For bundles, the cumulative size, in bytes, of items in the `contents` field.|integer (int64)
|**updated** +
__optional__|Timestamp of `Object` update in RFC3339, identical to create timestamp in systems that do not support updates.|string (date-time)
|**version** +
__optional__|A string representing a version.
(Some systems may use checksum, a RFC3339 timestamp, or an incrementing version number.)|string
|===


[[_serviceinfo]]
=== ServiceInfo
Useful information about the running service.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**contact** +
__optional__|Maintainer contact info|object
|**description** +
__optional__|Service description|string
|**license** +
__optional__|License information for the exposed API|object
|**title** +
__optional__|Service name|string
|**version** +
__required__|Service version|string
|===



